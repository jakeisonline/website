---
title: Detecting when an element becomes sticky
description: Maybe you you'd like to style a sticky element differently when it becomes sticky, or simply run some code when it becomes sticky. You can't do it with CSS alone, but IntersectionObserver to the rescue!
publishedAt: "2025-05-10"
layout: "@/layouts/post-layout.astro"
---

import Callout from "@/components/blocks/callout.astro"
import Example from "@/components/example"

I recently stumbled upon a lovely detail on [website] when scrolling down a list. As soon as the date headings became sticky, they turned into floating badges.

There's no way to use CSS to style an element when it becomes sticky, so how the hell did they do it?

I've no idea, but here's how I would do it.

## Making an element sticky

Having elements become automatically sticky when scrolling is very simple. You just need to set [`position: sticky`](https://developer.mozilla.org/en-US/docs/Web/CSS/position#sticky) on the element and then set an inset property to control the offset relative to the nearest scrolling ancestor.

```css
.sticky {
  position: sticky;
  top: 0;
}
```

<Callout type="tip" title="Using inset properties beyond top">
  While `top` is being used in this example, you can use any of the [inset
  properties](https://developer.mozilla.org/en-US/docs/Web/CSS/inset) to control
  where the element sticks to. At least one inset property **must** be set.
</Callout>

If we take our Luma example from earlier, we can use sticky positioning on the date headings like so:

<Example
  name="detecting-sticky-elements-basic"
  className="max-h-64"
  client:load
/>

Now, our headings become sticky when they hit the top of the viewport. But the headings just float over the content, which doesn't look clean or as slick.

So, how can we style the headings when they become sticky?

## Detecting when an element becomes sticky

As of this writing, there is no way to detect when an element becomes sticky using CSS alone. We have to rely on JavaScript to detect when an element becomes sticky.

Thankfully, we have a Web API that can help us out: [`IntersectionObserver`](https://developer.mozilla.org/en-US/docs/Web/API/Intersection_Observer_API).

<Example
  name="detecting-sticky-elements-simple"
  className="max-h-64"
  client:load
/>

<div className="h-[2000px]" />
